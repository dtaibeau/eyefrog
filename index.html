<!doctype html>
<meta charset="utf-8" />
<title>eyefrog — manual tongue (WASD + ; ')</title>
<style>
  html,body{height:100%}
  body{
    margin:0; background:#000; color:#7CFF8B;
    display:flex; align-items:center; justify-content:center;
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  }
  .stage{position:relative; width:100vw; height:100vh; overflow:hidden}
  pre{
    margin:0; white-space:pre; tab-size:2;
    line-height:1; letter-spacing:0; font-size:16px; /* char cell size */
    transform-origin: top left; position:absolute; top:0; left:0; user-select:none;
  }
  #base   { color:#19f06d; text-shadow:0 0 6px #093; }
  #overlay{ color:#b7ffcf; text-shadow:0 0 10px #0f5; }
  #hud{
    position:fixed; left:10px; bottom:10px; right:10px;
    font:12px/1.35 ui-monospace,monospace; color:#9fe9b3; opacity:.85
  }
  kbd{padding:1px 4px;border:1px solid #366;border-radius:4px}
</style>

<div class="stage">
  <pre id="base"></pre>
  <pre id="overlay"></pre>
</div>
<div id="hud">
  <div>
    <b>Move tongue origin</b>: <kbd>W</kbd>/<kbd>S</kbd>/<kbd>A</kbd>/<kbd>D</kbd> (hold <kbd>Shift</kbd> for faster) &nbsp;|&nbsp;
    <b>Rotate</b>: <kbd>;</kbd> CCW, <kbd>'</kbd> CW &nbsp;|&nbsp;
    <b>Length</b>: <kbd>[</kbd> / <kbd>]</kbd> &nbsp;|&nbsp;
    <b>Guide</b>: <kbd>G</kbd> &nbsp;|&nbsp;
    <b>Log config</b>: <kbd>L</kbd>
  </div>
</div>

<script>
/* ===== 1) PASTE YOUR BIG ASCII HERE ===== */
const ART = `
/* ⬇⬇⬇ paste your giant frog ASCII EXACTLY here ⬇⬇⬇ */
`.trimEnd();

/* ===== 2) Tongue placement block (your requested vars) ===== */
let TONGUE_ROW = 44;
let TONGUE_COL = 70;
let TONGUE_W   = 50;
let TONGUE_H   = 50;
let TONGUE_ROT_DEG = 0;

/* Visuals */
const TONGUE_THICK = 3;   // rows thick
let   TONGUE_LEN   = 160; // change with [ and ]
const SEG='=', TIP='»';
let showGuide = true;

/* ===== DOM & base render ===== */
const baseEl = document.getElementById('base');
const ovEl   = document.getElementById('overlay');
baseEl.textContent = ART;
const lines0 = ART.split('\n');

/* ===== Fit to viewport ===== */
function fit(){
  baseEl.style.transform = ovEl.style.transform = 'scale(1)';
  requestAnimationFrame(()=>{
    const pad=12, maxW=innerWidth-pad, maxH=innerHeight-pad;
    const w=baseEl.scrollWidth, h=baseEl.scrollHeight;
    const scale = Math.min(maxW/w, maxH/h, 1);
    const offX = Math.max((maxW - w*scale)/2, 0);
    const offY = Math.max((maxH - h*scale)/2, 0);
    const t = `translate(${offX}px, ${offY}px) scale(${scale})`;
    baseEl.style.transform=t; ovEl.style.transform=t;
  });
}
addEventListener('resize', fit);

/* ===== Helpers ===== */
function tongueOrigin(){
  // center of the placement box
  return {
    row: TONGUE_ROW + Math.floor(TONGUE_H/2),
    col: TONGUE_COL + Math.floor(TONGUE_W/2),
  };
}

/* Draw a thick tongue line starting at (row0,col0) with angle (deg) */
function drawTongue(len, row0, col0, angleDeg){
  if (len<=0) return '';
  const rad = angleDeg*Math.PI/180;
  const dx = Math.cos(rad), dy = -Math.sin(rad);  // screen Y is down → invert sin
  const nx = -Math.sin(rad), ny =  Math.cos(rad);
  const half = Math.floor((TONGUE_THICK-1)/2);

  const rows = new Map();
  const put = (r,c,ch)=>{
    r=Math.round(r); c=Math.max(0,Math.round(c));
    if (r<0) return; const a=rows.get(r)||[]; a.push([c,ch]); rows.set(r,a);
  };
  // shaft
  for (let i=0;i<Math.max(0,len-1);i++){
    for (let t=-half;t<=half;t++){
      put(row0 + dy*i + ny*t, col0 + dx*i + nx*t, SEG);
    }
  }
  // tip
  for (let t=-half;t<=half;t++){
    put(row0 + dy*(len-1) + ny*t, col0 + dx*(len-1) + nx*t, TIP);
  }

  const maxR = Math.max(...rows.keys(), 0), out=[];
  for (let r=0;r<=maxR;r++){
    const a=rows.get(r); if(!a){out.push('');continue;}
    a.sort((x,y)=>x[0]-y[0]);
    let s='', last=-1;
    for (const [col,ch] of a){ if (col>last+1) s+=' '.repeat(col-(last+1)); s+=ch; last=col; }
    out[r]=s;
  }
  // vertical offset to row0 so we don't render tons of blank top lines
  return '\n'.repeat(Math.max(0, Math.min(row0, out.length?row0:0))) + out.join('\n');
}

/* Guide overlay: shows the tongue placement box + its center */
function guideOverlay(){
  if (!showGuide) return '';
  const rows = new Map();
  const put=(r,c,ch)=>{ r=Math.round(r); c=Math.max(0,Math.round(c));
    if (r<0) return; const a=rows.get(r)||[]; a.push([c,ch]); rows.set(r,a);
  };

  // draw rectangle border
  for (let c=TONGUE_COL; c<TONGUE_COL+TONGUE_W; c++){
    put(TONGUE_ROW, c, '·');
    put(TONGUE_ROW+TONGUE_H-1, c, '·');
  }
  for (let r=TONGUE_ROW; r<TONGUE_ROW+TONGUE_H; r++){
    put(r, TONGUE_COL, '·');
    put(r, TONGUE_COL+TONGUE_W-1, '·');
  }

  // center (origin) marker
  const o = tongueOrigin();
  put(o.row, o.col, '✚');

  const maxR=Math.max(...rows.keys(),0), out=[];
  for (let r=0;r<=maxR;r++){
    const a=rows.get(r); if(!a){out.push('');continue;}
    a.sort((x,y)=>x[0]-y[0]);
    let s='', last=-1;
    for (const [col,ch] of a){ if (col>last+1) s+=' '.repeat(col-(last+1)); s+=ch; last=col; }
    out[r]=s;
  }
  return '\n'.repeat(Math.max(0, Math.min(TONGUE_ROW, out.length?TONGUE_ROW:0))) + out.join('\n');
}

/* Repaint */
function render(){
  const o = tongueOrigin();
  ovEl.textContent = drawTongue(TONGUE_LEN, o.row, o.col, TONGUE_ROT_DEG) + guideOverlay();
}

/* Key controls */
function logTongue(){
  console.log("TONGUE_ROW =", TONGUE_ROW);
  console.log("TONGUE_COL =", TONGUE_COL);
  console.log("TONGUE_W   =", TONGUE_W);
  console.log("TONGUE_H   =", TONGUE_H);
  console.log("TONGUE_ROT_DEG =", TONGUE_ROT_DEG);
  console.log("TONGUE_LEN =", TONGUE_LEN);
}
addEventListener('keydown', (e)=>{
  const k = e.key;
  const fast = e.shiftKey;
  const step = fast ? 10 : 1;
  let changed=false;

  // move box (which moves origin)
  if (k==='w' || k==='W'){ TONGUE_ROW = Math.max(0, TONGUE_ROW - step); changed=true; }
  if (k==='s' || k==='S'){ TONGUE_ROW += step; changed=true; }
  if (k==='a' || k==='A'){ TONGUE_COL = Math.max(0, TONGUE_COL - step); changed=true; }
  if (k==='d' || k==='D'){ TONGUE_COL += step; changed=true; }

  // rotate tongue
  if (k === ';'){ TONGUE_ROT_DEG = (TONGUE_ROT_DEG - 1 + 360) % 360; changed=true; }
  if (k === "'"){ TONGUE_ROT_DEG = (TONGUE_ROT_DEG + 1) % 360; changed=true; }

  // length
  if (k === '['){ TONGUE_LEN = Math.max(1, TONGUE_LEN - (fast?10:5)); changed=true; }
  if (k === ']'){ TONGUE_LEN = TONGUE_LEN + (fast?10:5); changed=true; }

  // guide toggle
  if (k==='g' || k==='G'){ showGuide=!showGuide; changed=true; }

  // log
  if (k==='l' || k==='L'){ logTongue(); }

  if (changed){ render(); fit(); }
});

/* Kick off */
fit();
render();
</script>
